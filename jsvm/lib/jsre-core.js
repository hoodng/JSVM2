self.js = self.js || {};(function () {J$VM = {};J$VM.__version__ = "1.0.";J$VM.env = {j$vm_ajax_nocache:true, j$vm_ajax_timeout:600000};J$VM.isworker = function () {return !self.document;}();var TYPES = ["Null", "Undefined", "Function", "Object", "Array", "Boolean", "Number", "String", "Date"], lang = this.lang = {Class:{}, System:{}}, Class = lang.Class, System = lang.System, SANDBOX = System.SANDBOX = {name:"j$vm-sandbox"}, BREAKLOOP = Class.BREAKLOOP = "break-loop", sliceArgs = Array.prototype.slice, typeString = Object.prototype.toString, hasKey = Object.prototype.hasOwnProperty, typeOf = Class.typeOf = function (x, type) {var s = typeString.call(x);s = s.substring(8, s.length - 1);return arguments.length > 1 ? s === type : s;};(function () {TYPES.forEach(function (type) {this["is" + type] = function (x) {return typeOf(x, type);};});this.keys = function (map) {var ret = [], key;for (key in (map = map || {})) {if (hasKey.call(map, key)) {ret.push(key);}}return ret;};}).call(Class);(function () {var props = J$VM.env, os;(function () {if (!J$VM.isworker) {os = self.console || {info:function (s) {}, error:function (s) {}, log:function (s) {}};} else {var post = self.postMessage;os = {};os.info = function (s) {post({type:"inf", data:s});};os.error = function (s) {post({type:"err", data:s});};os.log = function (s) {post({type:"log", data:s});};}})();this.out = {println:function (s) {os.info(s);}};this.err = {println:function (s) {os.error(s);}};this.log = {println:function (s) {if (this.logEnabled()) {os.log(s);}}};this.logEnabled = function () {return this.getProperty("j$vm_log") === true;};this.hasProperty = function (key) {return props.hasOwnProperty(key);};this.getProperty = function (key, defValue) {return this.hasProperty(key) ? props[key] || defValue : defValue;};this.setProperty = function (key, value) {var pre = null;if (key) {pre = props[key];props[key] = value;}return pre;};this.forArray = function (set, fn, thi$, args) {var BK = BREAKLOOP;thi$ = thi$ || SANDBOX;args = sliceArgs.call(arguments, 3);for (var i = 0, len = set.length; i < len; i++) {try {fn.apply(thi$, [set[i], i, set].concat(args));}catch (x) {if (x === BK) {break;}throw x;}}};this.forObject = function (set, fn, thi$, args) {var BK = BREAKLOOP, has = Object.prototype.hasOwnProperty;thi$ = thi$ || SANDBOX;args = sliceArgs.call(arguments, 3);for (var i in set) {if (!has.call(set, i)) {continue;}try {fn.apply(thi$, [set[i], i, set].concat(args));}catch (x) {if (x === BK) {break;}throw x;}}};this.objectCopy = function (src, des, deep, unmerge) {switch (Class.typeOf(src)) {case "Object":des = des || {};this.forObject(src, function (v, k) {des[k] = (!deep || !Class.isObject(v)) ? v : this.objectCopy(v, (unmerge ? null : des[k]), deep, unmerge);}, this);break;case "Array":des = this.arrayCopy(src, 0, des, 0, src.length, deep);break;default:des = src;}return des;};this.arrayCopy = function (src, srcIdx, des, desIdx, length, deep) {var len = src.length - srcIdx, BK = BREAKLOOP;length = Class.isNumber(length) ? ((length > len) ? len : length) : len;des = des || [];this.forArray(src, function (v, i) {if (i < srcIdx) {return;}if (i > srcIdx + length - 1) {throw BK;}des[desIdx + i - srcIdx] = (!deep || !Class.isObject(v)) ? v : this.objectCopy(v, null, deep);}, this);return des;};var tasks = [], scheduled;this.queued = function (fn, callback, thi$, args) {var task = {state:0, fn:fn, data:null}, curTask = tasks.length > 0 ? tasks[tasks.length - 1] : null;fn.ctx = {thi$:thi$ || SANDBOX, callback:callback, args:sliceArgs.call(arguments, 3)};if (!curTask || curTask.state === 1) {tasks.push(task);scheduled = false;} else {curTask.tasks = curTask.tasks || [];curTask.tasks.push(task);}if (!scheduled) {scheduled = true;_run.$delay(0, this);}};var _run = function () {var fn, ctx, promise, curTask = tasks.length > 0 ? tasks[tasks.length - 1] : null;if (!curTask) {scheduled = false;return;}fn = curTask.fn;ctx = fn.ctx;switch (curTask.state) {case 0:curTask.state = 1;promise = {data:curTask.data, done:_done.$bind(this)};fn.apply(ctx.thi$, [promise].concat(ctx.args));break;case 2:if (Class.isFunction(ctx.callback)) {ctx.callback.apply(ctx.thi$, [curTask.data].concat(ctx.args));}fn.ctx = null;var task = curTask.tasks ? curTask.tasks.shift() : null;if (task) {task.data = curTask.data;task.tasks = curTask.tasks;tasks[tasks.length - 1] = task;} else {curTask = tasks.pop();task = tasks.length > 0 ? tasks[tasks.length - 1] : null;if (task) {task.state = 2;task.data = curTask.data;}}curTask.data = null;curTask.tasks = null;curTask.fn = null;_run.call(this);break;default:throw new Error("Unexcept state: " + curTask.state);break;}};var _done = function (data) {var curTask = tasks[tasks.length - 1];curTask.state = 2;curTask.data = data;_run.call(this);};}).call(System);(function () {this.$forEach = function (set, thi$, args) {System["for" + typeOf(set)].apply(SANDBOX, [set, this].concat(sliceArgs.call(arguments, 1)));};this.$map = function (set, thi$, args) {var fn = this, ret = Class.isArray(set) ? [] : {};thi$ = thi$ || SANDBOX;args = sliceArgs.call(arguments, 2);(function (e, i, set) {ret[i] = fn.apply(thi$, [e, i, set].concat(args));}).$forEach(set);return ret;};this.$filter = function (set, thi$, args) {var fn = this, isA = Class.isArray(set), ret = isA ? [] : {};thi$ = thi$ || SANDBOX;args = sliceArgs.call(arguments, 2);(function (e, i, set) {if (fn.apply(thi$, [e, i, set].concat(args))) {isA ? ret.push(e) : ret[i] = e;}}).$forEach(set);return ret;};this.$some = function (set, thi$, args) {var fn = this, BK = BREAKLOOP, ret = false;thi$ = thi$ || SANDBOX;args = sliceArgs.call(arguments, 2);(function (e, i, set) {if (fn.apply(thi$, [e, i, set].concat(args))) {ret = true;throw BK;}}).$forEach(set);return ret;};this.$every = function (set, thi$, args) {var fn = this, BK = BREAKLOOP, ret = true;thi$ = thi$ || SANDBOX;args = sliceArgs.call(arguments, 2);(function (e, i, set) {if (!fn.apply(thi$, [e, i, set].concat(args))) {ret = false;throw BK;}}).$forEach(set);return ret;};this.$delay = function (timeout, thi$, args) {var fn = this, timer;thi$ = thi$ || SANDBOX;args = sliceArgs.call(arguments, 2);timer = self.setTimeout(function () {fn.$cancel(timer);try {fn.apply(thi$, args);}catch (x) {System.err.println(x);}}, timeout || 1);fn.__timer__ = (fn.__timer__ || []);fn.__timer__.push(timer);return timer;};this.$cancel = function (timer) {var timers = this.__timer__, i;if (!timers || timers.length == 0) {return;}if (arguments.length === 0) {self.clearTimeout(timers.shift());} else {if ((function (e, k) {i = k;return timer === e;}).$some(timers)) {timers.splice(i, 1);self.clearTimeout(timer);}}};this.$while = function (testP, thi$, args) {var fn = this, hasNext = testP;thi$ = thi$ || SANDBOX;args = sliceArgs.call(arguments, 2);if (Class.isFunction(testP)) {hasNext = testP.apply(thi$, args);}if (hasNext) {fn.apply(thi$, args);(function () {fn.$while.apply(fn, [testP, thi$].concat(args));}).$delay(1);}};this.$queued = function (callback, thi$, args) {System.queued.apply(System, [this].concat(sliceArgs.call(arguments)));};this.$bind = function (thi$, args) {var fn = this;args = sliceArgs.call(arguments, 1);return function () {return fn.apply(thi$, sliceArgs.call(arguments).concat(args));};};this.$override = function (fn) {this.__super__ = fn;return this;};self.$super = function (thi$, args) {var caller = self.$super.caller;args = arguments.length > 1 ? sliceArgs.call(arguments, 1) : sliceArgs.call(caller.arguments);return caller.__super__.apply(thi$, args);};self.$inject = function (target, fnName, inject, after) {var fn = target[fnName], ret;if (!Class.isFunction(fn) || !Class.isFunction(inject)) {return;}target[fnName] = function () {if (!after) {inject(arguments);ret = self.$super(this);} else {ret = self.$super(this);inject(arguments);}return ret;}.$override(fn);};self.$debug = function (target, fnName) {self.$inject(target, fnName, function () {debugger;
});};self.$define = function (fn) {if (!Class.isFunction(fn)) {return;}(function (promise) {fn.call(SANDBOX);promise.done();}).$queued();};this.$extend = function (clazz) {var proto;if (Class.isFunction(clazz)) {proto = new (clazz)();proto.constructor = clazz;} else {if (clazz) {proto = clazz;}}this.prototype = proto;return this;};this.$decorate = function (obj, replace) {var clazz = this;if (!obj) {return null;}if (!clazz.__defined__) {new (clazz)();}replace = replace || {};(function (e, k) {if (Class.isFunction(e) && (!obj[k] || replace[k])) {obj[k] = e;}}).forEach(clazz.prototype);return obj;};this.$implements = function (clazz) {var proto = this.prototype, impls;impls = proto.__impls__ = [].concat(proto.__impls__ || []);(function (fn) {if (Class.isFunction(fn)) {impls.push(fn);fn.$decorate(proto);}}).$forEach(sliceArgs.call(arguments));return this;};}).call(Function.prototype);})();js.lang.Class = function () {var Class = this, classes = {"js.lang.Class":this};self.$package = function (name) {var clazz = classes[name], names;if (clazz) {return clazz;}clazz = self, names = name.split(".");(function (v) {var o = clazz[v];o = !o ? (clazz[v] = {}) : o;clazz = o;}).$forEach(names);classes[name] = clazz;return clazz;};var _checkClass = function (className) {var clazz = classes[className], names;if (!clazz) {clazz = self, names = className.split(".");(function (v) {clazz = clazz[v];if (!clazz) {throw Class.BREAKLOOP;}}).$forEach(names);if (clazz) {classes[className] = clazz;}}return clazz;};self.$import = function (className) {var clazz = _checkClass(className);if (clazz) {return;}(function (promise) {_loadClass.call(this, className, promise.done);}).$queued(null, Class);};this.forName = function (className) {var clazz = _checkClass(className);if (!clazz) {_loadClass.call(this, className);}return clazz;};var _loadClass = function (className, callback) {var clazz;console.log("load class: " + className);classes[className] = clazz;callback(clazz);};var _onreadscript = function (e) {var script, head, xhr = e.getData(), code = xhr.responseText();xhr.close();script = document.createElement("script");head = document.getElementsByTagName("head")[0];script.type = "text/javascript";script.text = code;head.appendChild(script);head.removeChild(script);};this.loadScript = function (filePath, text) {var b = !text;this.getResource(filePath, function (e) {var xhr = e.getData();text = xhr.responseText();}, b);text = text || this.getResource(filePath, !this.isString(text));var script = document.createElement("script");var head = document.getElementsByTagName("head")[0];script.type = "text/javascript";script.text = text;head.appendChild(script);head.removeChild(script);if (b) {this.packages.push(filePath);}return text;};this.getResource = function (url, callback, nocache) {var xhr = J$VM.XHRPool.getXHR(true);xhr.setNoCache(nocache || false);xhr.onsuccess = xhr.ontimeout = xhr.onhttperr = callback;xhr.open("GET", url);};return this;}.call(js.lang.Class);

js.lang.Math = function () {var Class = js.lang.Class, D = (1 << 16) + (1 << 8) + 1, CRCT = [0, 1996959894, 3993919788, 2567524794, 124634137, 1886057615, 3915621685, 2657392035, 249268274, 2044508324, 3772115230, 2547177864, 162941995, 2125561021, 3887607047, 2428444049, 498536548, 1789927666, 4089016648, 2227061214, 450548861, 1843258603, 4107580753, 2211677639, 325883990, 1684777152, 4251122042, 2321926636, 335633487, 1661365465, 4195302755, 2366115317, 997073096, 1281953886, 3579855332, 2724688242, 1006888145, 1258607687, 3524101629, 2768942443, 901097722, 1119000684, 3686517206, 2898065728, 853044451, 1172266101, 3705015759, 2882616665, 651767980, 1373503546, 3369554304, 3218104598, 565507253, 1454621731, 3485111705, 3099436303, 671266974, 1594198024, 3322730930, 2970347812, 795835527, 1483230225, 3244367275, 3060149565, 1994146192, 31158534, 2563907772, 4023717930, 1907459465, 112637215, 2680153253, 3904427059, 2013776290, 251722036, 2517215374, 3775830040, 2137656763, 141376813, 2439277719, 3865271297, 1802195444, 476864866, 2238001368, 4066508878, 1812370925, 453092731, 2181625025, 4111451223, 1706088902, 314042704, 2344532202, 4240017532, 1658658271, 366619977, 2362670323, 4224994405, 1303535960, 984961486, 2747007092, 3569037538, 1256170817, 1037604311, 2765210733, 3554079995, 1131014506, 879679996, 2909243462, 3663771856, 1141124467, 855842277, 2852801631, 3708648649, 1342533948, 654459306, 3188396048, 3373015174, 1466479909, 544179635, 3110523913, 3462522015, 1591671054, 702138776, 2966460450, 3352799412, 1504918807, 783551873, 3082640443, 3233442989, 3988292384, 2596254646, 62317068, 1957810842, 3939845945, 2647816111, 81470997, 1943803523, 3814918930, 2489596804, 225274430, 2053790376, 3826175755, 2466906013, 167816743, 2097651377, 4027552580, 2265490386, 503444072, 1762050814, 4150417245, 2154129355, 426522225, 1852507879, 4275313526, 2312317920, 282753626, 1742555852, 4189708143, 2394877945, 397917763, 1622183637, 3604390888, 2714866558, 953729732, 1340076626, 3518719985, 2797360999, 1068828381, 1219638859, 3624741850, 2936675148, 906185462, 1090812512, 3747672003, 2825379669, 829329135, 1181335161, 3412177804, 3160834842, 628085408, 1382605366, 3423369109, 3138078467, 570562233, 1426400815, 3317316542, 2998733608, 733239954, 1555261956, 3268935591, 3050360625, 752459403, 1541320221, 2607071920, 3965973030, 1969922972, 40735498, 2617837225, 3943577151, 1913087877, 83908371, 2512341634, 3803740692, 2075208622, 213261112, 2463272603, 3855990285, 2094854071, 198958881, 2262029012, 4057260610, 1759359992, 534414190, 2176718541, 4139329115, 1873836001, 414664567, 2282248934, 4279200368, 1711684554, 285281116, 2405801727, 4167216745, 1634467795, 376229701, 2685067896, 3608007406, 1308918612, 956543938, 2808555105, 3495958263, 1231636301, 1047427035, 2932959818, 3654703836, 1088359270, 936918000, 2847714899, 3736837829, 1202900863, 817233897, 3183342108, 3401237130, 1404277552, 615818150, 3134207493, 3453421203, 1423857449, 601450431, 3009837614, 3294710456, 1567103746, 711928724, 3020668471, 3272380065, 1510334235, 755167117];var last = (new Date()).getTime();this.uuid = function (hash) {hash = hash || this.hash();return ["s", hash.toString(16)].join("");};this.hash = function () {var now = (new Date()).getTime();if (now <= last) {now = last + D;}return (last = now);};this.crc32 = function (str) {var crc = 0, c, i, len, n;if (!Class.isString(str)) {return "0";}crc = crc ^ (-1);i = 0;len = str.length;while (i < len) {c = str.charCodeAt(i++);if (c <= 127) {crc = _crc(crc, c);} else {if (c >= 128 && c <= 32767) {crc = _crc(crc, ((c >> 6) & 31) | 192);crc = _crc(crc, (c & 63) | 128);} else {crc = _crc(crc, (c >> 12) | 224);crc = _crc(crc, ((c >> 6) & 63) | 128);crc = _crc(crc, (c & 63) | 128);}}}return ((crc ^ (-1)) >>> 0).toString(16);};var _crc = function (crc, c) {return (crc >>> 8) ^ CRCT[(crc ^ c) & 255];};return this;}.call(Math);

js.lang.String = function () {var REGX_HTML_ENCODE = /"|&|'|<|>|[\x00-\x20]|[\x7F-\xFF]|[\u0100-\u2700]/g;var REGX_HTML_DECODE = /&\w+;|&#(\d+);|<br\/>/g;var REGX_REGEXP_METACHARS = /[\^\$\.\*\+\?\|\\\(\)\[\]\{\}]/g;var REGX_REGEXP_ESCAPEDMETACHARS = /\\([\^\$\.\*\+\?\|\\\(\)\[\]\{\}])/g;var HTML_DECODE = {"&lt;":"<", "&gt;":">", "&amp;":"&", "&nbsp;":" ", "&quot;":"\"", "&copy;":"\xa9"};var Class = js.lang.Class;this.encodeHtml = function encodeHtml(s, nobreak, ignoreSpace) {s = s || this.toString();var o;return (typeof s != "string") ? s : s.replace(REGX_HTML_ENCODE, function ($0) {var c = $0.charCodeAt(0), r = ["&#"];if (c == 13 && nobreak != true) {o = c;return "<br/>";}if (c == 10 && nobreak != true) {return (o == 13) ? "" : "<br/>";}if (c == 32 || c == 160) {if (ignoreSpace !== true) {c = (c == 32) ? 160 : c;} else {c = (c == 160) ? 32 : c;return String.fromCharCode(c);}}r.push(c);r.push(";");return r.join("");});};this.decodeHtml = function decodeHtml(s, nobreak) {s = (s != undefined) ? s : this.toString();return (typeof s != "string") ? s : s.replace(REGX_HTML_DECODE, function ($0, $1) {var c = HTML_DECODE[$0];if (c == undefined) {if (!isNaN($1)) {c = String.fromCharCode(($1 == 160) ? 32 : $1);} else {c = $0;}}return c;});};this.escapeRegExp = function escapeRegExp() {var str = this.toString();return str.replace(REGX_REGEXP_METACHARS, function ($0) {return "\\" + $0;});};this.unescapeRegExp = function unescapeRegExp() {var str = this.toString();return str.replace(REGX_REGEXP_ESCAPEDMETACHARS, function ($0, ch) {return ch;});};var REGX_TRIM = /(^\s*)|(\s*$)/g;this.trim = this.trim || function trim() {var str = this.toString();return str.replace(REGX_TRIM, "");};this.endsWith = this.endsWith || function endsWith(suffix) {return this.indexOf(suffix, this.length - suffix.length) !== -1;};this.startsWith = this.startsWith || function startsWith(suffix) {return this.indexOf(suffix) === 0;};this.hashCode = this.hashCode || function hashCode() {var hash = this.__hash__, c, i, len;if (hash) {return hash;}hash = 0;for (i = 0, len = this.length; i < len; i++) {c = this.charCodeAt(i);hash = 31 * hash + c;hash = hash & hash;}hash = hash & 2147483647;return (this.__hash__ = hash);};return String;}.call(String.prototype);

js.lang.Object = function (def) {var CLASS = js.lang.Object, thi$ = CLASS.prototype;if (CLASS.__defined__) {this._init.apply(this, arguments);return;}var Class = js.lang.Class, objs = {};thi$.uuid = function () {var uuid = this.__uuid__;if (!uuid) {uuid = this.__uuid__ = Math.uuid(this.hashCode());}return uuid;};thi$.hashCode = function () {var hash = this.__hash__;if (!hash) {hash = this.__hash__ = Math.hash();}return hash;};thi$.getRuntime = function () {this.getContextAttr("__runtime__");};thi$.getObject = function (uuid) {var ctx = objs[uuid];return ctx ? ctx.__self__ : null;};thi$.linkContext = function (uuid) {var ctx = objs[this.__uuid__];if (Class.isString(uuid) && uuid) {ctx.__chain__ = uuid;}};thi$.getContextAttr = function (name) {var ctx = objs[this.__uuid__], val;if (ctx.hasOwnProperty(name)) {return ctx[name];} else {ctx = this.getObject(ctx._chain__);return ctx ? ctx.getContextAttr(name) : null;}};thi$.putContextAttr = function (name, value) {var ctx = objs[this.__uuid__];if (name) {ctx[name] = value;}};thi$.setParent = function (parent) {var ctx = objs[this.__uuid__];if (parent instanceof CLASS) {this.__local__.parent = parent;if (!ctx.__chain__) {ctx.__chain__ = parent.uuid();}}};thi$.getParent = function () {return this.__local__.parent;};thi$.destroy = function () {this.__local__ = null;objs[this.__uuid__] = null;};thi$._init = function (def) {if (arguments.length === 0) {return;}var uuid = this.__uuid__ = def.uuid || this.uuid(), ctx = objs[uuid] = (objs[uuid] || {});ctx.__self__ = this;this.linkContext(def.context);this.id = def.id;this.__local__ = {};};this._init.apply(this, arguments);}.$extend(Object);

$package("js.util");js.util.Event = function (type, data, source, target) {var CLASS = js.util.Event, thi$ = CLASS.prototype;if (CLASS.__defined__) {this._init.apply(this, arguments);return;}var Class = js.lang.Class;thi$.cancelBubble = function () {this.bubbleable = false;};thi$.cancelDefault = function () {this.defaultprc = false;};thi$._init = function (type, data, source, target) {if (arguments.length === 0) {return;}this.type = type;this.data = data;this.source = source;this.target = target;this.bubbleable = true;this.defaultprc = true;this.timestamp = new Date();};this._init.apply(this, arguments);};(function () {var Class = js.lang.Class, Event = this, sliceArgs = Array.prototype.slice;this.FLAG = {EXCLUSIVE:1 << 0, CAPTURED:1 << 1, CUSTOMIZED:1 << 2, check:function (f) {var o = {exclusive:false, captured:false, customized:false};if (Class.isNumber(f)) {o.exclusive = (f & this.EXCLUSIVE) != 0;o.captured = (f & this.CAPTURED) != 0;o.customized = (f & this.CUSTOMIZED) != 0;} else {o.exclusive = (f === true);}return o;}};this.attachEvent = function (target, eType, flag, thi$, handler) {var fn, args, hs, check = this.FLAG.check(flag);args = sliceArgs.call(arguments, 5);fn = function (e) {if (!(e instanceof Event)) {e = new Event(e.type, e);}args.unshift(e);handler.apply(thi$, args);};fn.__thi$__ = thi$;fn.__hostf__ = handler;fn.__check__ = check;hs = target.__handlers__ = target.__handlers__ || {};hs = hs[eType] = hs[eType] || [];hs.push(fn);if (check.exclusive) {target["on" + eType] = fn;} else {if (target.addEventListener) {target.addEventListener(eType, fn, check.captured);} else {target.attachEvent("on" + eType, fn);}}return fn;};this.detachEvent = function (target, eType, flag, thi$, handler) {var fn, hs, check;hs = target.__handlers__ = target.__handlers__ || {};hs = hs[eType] = hs[eType] || [];for (var i = 0; i < hs.length; i++) {fn = hs[i];if (handler && (fn.__thi$__ !== thi$ || fn.__hostf__ !== handler)) {continue;}check = fn.__check__;if (check.exclusive) {target["on" + eType] = null;} else {if (target.removeEventListener) {target.removeListener(eType, fn, check.captured);} else {target.detachEvent("on" + eType, fn);}}fn.__thi$__ = null;fn.__hostf__ = null;fn.__check__ = null;hs.splice(i, 1);}};this.W3C_EVT_LOAD = "load";this.W3C_EVT_UNLOAD = "unload";this.W3C_EVT_RESIZE = "resize";}).call(js.util.Event);

$package("js.util");js.util.EventTarget = function (def) {var CLASS = js.util.EventTarget, thi$ = CLASS.prototype;if (CLASS.__defined__) {this._init.apply(this, arguments);return;}var Class = js.lang.Class, System = J$VM.System, Event = js.util.Event, sliceArgs = Array.prototype.slice;thi$.attachEvent = function (eType, flag, thi$, fn, args) {var name = ["on", eType].join(""), handler;fn.ctx = {uuid:this.uuid(), thi$:thi$, func:fn, args:sliceArgs.call(arguments, 4)}, handler = this[name] = (this[name] || []);handler.push(fn.ctx);switch (flag) {case 0:case 1:Event.attachEvent(this, eType, flag, thi$, fn, args);break;case 2:var desk = this.getObject("desktop");Event.attachEvent(desk, eType, flag, thi$, fn, args);break;case 4:System.attachEvent(eType, flag, thi$, fn, args);break;}};thi$.detachEvent = function (eType, flag, thi$, fn) {};thi$.dispatchEvent = function (e, channel, recvs) {System.dispatchEvent(e, channel, recvs);};thi$.fireEvent = function (e, bubble) {var handler = this["on" + e.type];switch (Class.typeOf(handler)) {case "Function":handler.call(this, e);break;case "Array":_call.$forEach(handler, this, e);break;}if (bubble && e.bubbleable) {var parent = this.getParent();if (parent && parent.fireEvent) {parent.fireEvent.call(parent, e, bubble);}}};var _call = function (ctx, i, arrays, e) {ctx.fn.apply(ctx.thi$, [e].concat(ctx.args));};thi$.canCapture = function () {if (Class.isHtmlElement(this.view)) {return true;}var b = this.def ? this.def.capture : false;if (b) {var parent = this.getParent();b &= ((parent && parent.canCapture) ? parent.canCapture() : false);}return b;};thi$.destroy = function () {$super(this);};thi$._init = function (def) {if (arguments.length === 0) {return;}$super(this);};this._init.apply(this, arguments);}.$extend(js.lang.Object);

$package("js.lang");js.lang.System = function () {var Class = js.lang.Class, System = this, Event = js.util.Event;var _workerSystem = function () {return this;};var _browseSystem = function () {Event.attachEvent(self, Event.W3C_EVT_LOAD, 0, this, _onload);Event.attachEvent(self, Event.W3C_EVT_UNLOAD, 0, this, _onunload);return this;};var _onload = function (e) {System.out.println([J$VM.__product__, J$VM.__version__].join(" "));};var _onunload = function (e) {System.out.println("J$VM unload...");try {self.document.innerHTML = "";}catch (x) {}};return J$VM.isworker ? _workerSystem.call(this) : _browseSystem.call(this);}.call(js.lang.System);

